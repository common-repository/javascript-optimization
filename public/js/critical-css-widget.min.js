(function(n){function x(){function b(a){return a.reduce(function(c,a){c.push(h(a));var g=a.children,q=[],m;for(m=0;m<g.length;m++)q[m]=g[m];return c=c.concat(b(q))},[])}function h(a){var c=document.styleSheets,b=[],g;a.matches=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;for(var q in c){var m=c[q].rules||c[q].cssRules,d;for(d in m){g=m[d].selectorText?m[d].selectorText.split(" ").map(function(a){return a?a.split(/(:|::)/)[0]:!1}).join(" "):!1;try{a.matches(g)&&
b.push(m[d])}catch(e){}}}return b}var f=[],f=function(a){function c(a,c){return c.filter(function(c){return c.b===a})}var b=[];a.forEach(function(a){a.forEach(function(a){var g;g=a.selectorText;var d=c(g,b);g=0<d.length?d[0]:{b:g,c:{}};for(d=0;d<a.style.length;d++){var e=a.style[d];g.c[e]=a.style.getPropertyValue(e)}0===c(g.b,b).length&&b.push(g)})});return b}(b([document.body]));return f.reduce(function(a,c){a+=c.b+" {\n";a+=Object.keys(c.c).reduce(function(a,g){a.push("  "+g+": "+c.c[g]+";");return a},
[]).join("\n");return a+"\n}\n"},"")}function y(b){function h(a){var b=a.parentStyleSheet.href;b||(p++,b="inline");!1===!!c[b]&&(c[b]={media:a.parentStyleSheet.media,a:{}});!1===!!c[b].a[a.selectorText]&&(c[b].a[a.selectorText]={});for(var g=a.style.cssText.split(/;(?![A-Za-z0-9])/),d=0;d<g.length;d++)if(!1!==!!g[d]){var e=g[d].split(": ");e[0]=e[0].trim();e[1]=e[1].trim();c[b].a[a.selectorText][e[0]]=e[1]}}var f=document,a={},c={},p=0;this.f=function(){var a="",b=console&&console.groupCollapsed,
f,d,e=[];console.clear&&console.clear();b&&(console.log("%cSimple Critical CSS Extraction","font-size:24px;font-weight:bold"),console.log("For professional Critical CSS generators, see https://github.com/addyosmani/critical-path-css-tools"));for(var l in c){b&&(f="inline"===l?"Inline":"File: "+l,console.groupCollapsed(f),f="");e.push([l,a.split(/\r\n|\r|\n/).length]);a+="/**\n * @file "+l;if(c[l].media&&(1<c[l].media.length||"all"!==c[l].media[0])){d=[];for(var h=0;h<c[l].media.length;h++)c[l].media[h]&&
d.push(c[l].media[h]);0<d.length&&(d=d.join(" "),a+="\n * @media "+d)}a+="\n */\n";for(k in c[l].a){d=k+" { ";for(var p in c[l].a[k])d+=p+": "+c[l].a[k][p]+"; ";d+="}\n";a+=d;b&&(f+=d)}a+="\n";b&&(console.log(f),console.groupEnd())}b?console.groupCollapsed("All Extracted Critical CSS ("+t(a.length)+")"):console.log("%cAll:","font-weight:bold");console.log(a);b&&console.groupEnd();return[a,e]};(function(){for(var c=b.innerHeight,p=f.createTreeWalker(f,NodeFilter.SHOW_ELEMENT,function(){return NodeFilter.FILTER_ACCEPT},
!0);p.nextNode();){var m=p.currentNode;if(m.getBoundingClientRect().top<c||a.h)if(m=b.getMatchedCSSRules(m))for(var d=0;d<m.length;d++)h(m[d])}})()}function t(b){var h=Math.floor(Math.log(b)/Math.log(1024));return 1*(b/Math.pow(1024,h)).toFixed(2)+" "+["B","kB","MB"][h]}function v(){}(function(b,h){h.getMatchedCSSRules=b()})(function(){function b(b,a){var c=b.matchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector;if(c)try{return c.call(b,a)}catch(g){}else for(var c=b.ownerDocument.querySelectorAll(a),
f=c.length;f&&f--;)if(c[f]===b)return!0;return!1}function h(f){var a=[],c=f.ownerDocument.styleSheets,h=c.length,g,q,m,d,e;if(1===f.nodeType)for(;h&&h--;)for(q=c[h].cssRules||c[h].rules,g=q.length;g&&g--;)if(e=q[g],e instanceof CSSStyleRule&&b(f,e.selectorText))a.push(e);else if(e instanceof CSSMediaRule&&n.matchMedia(e.media.mediaText).matches)for(m=e.cssRules||e.rules,d=m.length;d&&d--;)e=m[d],e instanceof CSSStyleRule&&b(f,e.selectorText)&&a.push(e);return a}return function(){return n.getMatchedCSSRules?
n.getMatchedCSSRules:h}}(n),this);var u=u||function(b){if(!("undefined"===typeof b||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var h=b.document.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in h,a=/constructor/i.test(b.HTMLElement)||b.g,c=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(a){(b.setImmediate||b.setTimeout)(function(){throw a;},0)},g=function(a){setTimeout(function(){"string"===typeof a?(b.URL||b.webkitURL||b).revokeObjectURL(a):a.remove()},
4E4)},q=function(a){for(var b=["writestart","progress","write","writeend"],b=[].concat(b),c=b.length;c--;){var d=a["on"+b[c]];if("function"===typeof d)try{d.call(a,a)}catch(z){n(z)}}},m=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},d=function(d,e,n){n||(d=m(d));var l=this,p="application/octet-stream"===d.type,r;l.readyState=l.INIT;f?(r=(b.URL||b.webkitURL||b).createObjectURL(d),
setTimeout(function(){h.href=r;h.download=e;var a=new MouseEvent("click");h.dispatchEvent(a);q(l);g(r);l.readyState=l.DONE})):function(){if((c||p&&a)&&b.FileReader){var e=new FileReader;e.onloadend=function(){var a=c?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");b.open(a,"_blank")||(b.location.href=a);l.readyState=l.DONE;q(l)};e.readAsDataURL(d);l.readyState=l.INIT}else r||(r=(b.URL||b.webkitURL||b).createObjectURL(d)),p?b.location.href=r:b.open(r,"_blank")||(b.location.href=r),
l.readyState=l.DONE,q(l),g(r)}()},e=d.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,b,c){b=b||a.name||"download";c||(a=m(a));return navigator.msSaveOrOpenBlob(a,b)};e.abort=function(){};e.readyState=e.INIT=0;e.WRITING=1;e.DONE=2;e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null;return function(a,b,c){return new d(a,b||a.name||"download",c)}}}(n);if(n.o10n)var w=n.o10n.constructor.prototype;else n.o10n=new v,w=v.prototype;
w.extract=function(b,h){if("full"===b){var f=x();console.clear&&console.clear();console.log("%cFull CSS Extraction","font-size:24px;font-weight:bold");console.groupCollapsed&&console.groupCollapsed("Extracted Full CSS ("+t(f.length)+")");console.log(f);console.groupCollapsed&&console.groupEnd();f="/**\n * Full CSS\n *\n * @url "+document.location.href+"\n * @title "+document.title+"\n * @size "+t(f.length)+"\n *\n * Extracted using Critical CSS Widget.\n * @link https://github.com/o10n-x/critical-css-widget\n */\n\n"+
f;if(h)h(f);else{var f=new Blob([f],{type:"text/css;charset=utf-8"}),a=n.location.pathname,a=a&&"/"!==a&&-1!==a.indexOf("/")?"-"+a.replace(/\/$/,"").split("/").pop():"-front-page";u(f,"full-css"+a+".css")}}else{for(var a=(new y(n)).f(),f=a[0],a=a[1],c="/**\n * Simple Critical CSS\n *\n * @url "+document.location.href+"\n * @title "+document.title+"\n * @viewport "+n.innerWidth+"x"+n.innerHeight+"\n * @size "+t(f.length)+"\n *\n * Extracted using Critical CSS Widget.\n * @link https://github.com/o10n-x/critical-css-widget\n *\n * For professional Critical CSS generators see https://github.com/addyosmani/critical-path-css-tools\n *\n * @sources",
p=c.split(/\r\n|\r|\n/).length,p=p+(a.length+3),g=0;g<a.length;g++)c+="\n * @line "+(a[g][1]+p)+"\t @file "+a[g][0];c=c+"\n */\n\n"+f;h?h(c):(f=new Blob([c],{type:"text/css;charset=utf-8"}),a=(a=n.location.pathname)&&"/"!==a&&-1!==a.indexOf("/")?"-"+a.replace(/\/$/,"").split("/").pop():"-front-page",u(f,"critical-css"+a+".css"))}return"Starting extract..."}})(window);
